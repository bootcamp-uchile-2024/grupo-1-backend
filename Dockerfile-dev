FROM node:20.15.1-slim

# Agrega esta l√≠nea al principio del Dockerfile para descargar el script
ADD https://raw.githubusercontent.com/vishnubob/wait-for-it/master/wait-for-it.sh /wait-for-it.sh
RUN chmod +x /wait-for-it.sh

EXPOSE 3000

WORKDIR /app

ENV AMBIENTE=desarrollo

COPY package*.json ./
RUN npm install

COPY . ./

RUN npm install -g @nestjs/cli

CMD ["npm", "run", "start:dev"]